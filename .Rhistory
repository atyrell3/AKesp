render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
paste(tempdir(), "temp_esp", sep = "/")
dir <- paste(tempdir(), "temp_esp", sep = "/")
paste(dir, files$name[1], sep = "/")
?dir.create
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab")
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
# This template can be used to create a full or partial ESP
# The text content is read in from a word document
# The word document should be created based on the template
# Headings and table/figure references must follow specific formatting
knitr::opts_chunk$set(
echo = FALSE,
warning = FALSE,
results = "asis"
)
fig_spreadsheet <- params$fig_spreadsheet
tab_spreadsheet <- params$tab_spreadsheet
ref_spreadsheet <- params$ref_spreadsheet
esp_text <- params$esp_text
con_model_path <- params$con_model_path
# bayes
stock_image <- params$stock_image
message(fig_spreadsheet)
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
con_model_path = "noaa.jpg",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("BS Snow Crab"),
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
AKesp::esp_stock_options()
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
?knitr::include_graphics
?read.csv
?readtext::readtext
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
?knitr::include_graphics
?knitr::knit_expand
system.file("esp-report-card-child.Rmd", package = "AKesp")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
img <- "C:\Users"
img <- toString("C:\Users")
"C:\Users" %>% stringr::str_replace("C:\\\\U", "C:/U")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
warnings()
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
render_esp(out_dir = here::here("test"),
esp_data = AKesp::get_esp_data("Alaska Sablefish"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
roxygen2::roxygenise()
roxygen2::roxygenise()
pkgdown::build_site()
pkgdown::build_site()
?list.indicators
?list_indicators
pkgdown::build_site()
dat <- AKesp::get_esp_data("BS Snow Crab")
unique(dat$INDICATOR_NAME)
dat <- AKesp::get_esp_data("BS Snow Crab")
unique(dat$INDICATOR_NAME)
dat <- AKesp::get_esp_data("BS Snow Crab")
unique(dat$INDICATOR_NAME)
dat <- AKesp::get_esp_data("BS Snow Crab")
unique(dat$INDICATOR_NAME)
# snow crab!!
dir.create(here::here("snow_crab"))
devtools::load_all()
render_esp(out_dir = here::here("snow_crab"),
esp_data = AKesp::get_esp_data("BS Snow Crab"))
create_template(path = here::here("snow_crab"))
render_esp(out_dir = here::here("snow_crab"),
esp_data = AKesp::get_esp_data("BS Snow Crab"))
?render_esp
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
create_template(path = here::here("snow_crab"))
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
devtools::load_all()
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
?read.csv
devtools::load_all()
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
devtools::load_all()
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
unique(dat$INDICATOR_NAME)
roxygen2::roxygenise()
dat <- AKesp::get_esp_data("BS Snow Crab")
head(dat)
View(dat)
esp_traffic_tab_long
NEesp::find_files()
NEesp::find_files("read.table")
NEesp::find_files("read.csv")
devtools::load_all()
# test snow crab report card
# sablefish (google example)
render_esp(esp_type = "report card",
out_dir = here::here("test"),
out_name = "snow_crab_test_rc.docx",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
read.csv('C:/Users/ABIGAI~1.TYR/AppData/Local/Temp/1/Rtmpg7dy9I/temp_esp/C:/Users/ABIGAI~1.TYR/AppData/Local/Temp/1/Rtmpg7dy9I/temp_esp/references_spreadsheet.csv')
render_esp <- function(out_name = "EXAMPLE-FULL-ESP.docx",
out_dir = getwd(),
num = 1, # Appendix number
authors = "Kalei Shotwell, Abby Tyrell",
year = 2021,
contributors = "Kalei Shotwell, Abby Tyrell",
fish = "Myfish",
region = "Myarea",
fig_spreadsheet = "figure_spreadsheet.csv",
tab_spreadsheet = "table_spreadsheet.csv",
ref_spreadsheet = "references_spreadsheet.csv",
esp_text = "full-esp-text-template.docx",
esp_type = "full",
esp_data = NULL,
con_model_path = "default",
stock_image = "default",
bayes_path = "default",
google_folder_url = NULL
) {
# if using a google folder, download files and point to temp folder
if(!is.null(google_folder_url)){
# download files
google <- use_google_files(google_folder_url,
overwrite = TRUE)
# reassign file paths to point to temp folder downloads
fig_spreadsheet <- paste(google, fig_spreadsheet, sep = "/")
tab_spreadsheet <- paste(google, tab_spreadsheet, sep = "/")
ref_spreadsheet <- paste(google, ref_spreadsheet, sep = "/")
message(ref_spreadsheet)
esp_text <- paste(google, esp_text, sep = "/")
if(stock_image != "default"){
stock_image <- paste(google, stock_image, sep = "/")
}
if(con_model_path != "default"){
con_model_path <- paste(google, con_model_path, sep = "/")
}
if(bayes_path != "default"){
bayes_path <- paste(google, bayes_path, sep = "/")
}
dir <- google
} else { dir <- out_dir }
# create references.bib
# message(getwd())
message("creating .bib file...")
AKesp::render_ref(refs = ref_spreadsheet, dir = dir)
args <- list(
num, authors, year, contributors, fish, region,
fig_spreadsheet, tab_spreadsheet, esp_text, esp_type,
esp_data, con_model_path, bayes_path, stock_image
)
names(args) <- c(
"num", "authors", "year", "contributors", "fish", "region",
"fig_spreadsheet", "tab_spreadsheet", "esp_text", "esp_type",
"esp_data", "con_model_path", "bayes_path", "stock_image"
)
message("knitting ESP...")
rmarkdown::render(system.file("esp-template.Rmd",
package = "AKesp"
),
clean = FALSE,
params = args,
output_file = out_name,
#  knit_root_dir = dir,
output_dir = out_dir,
intermediates_dir = dir
)
if(!is.null(google_folder_url)){
unlink(google)
message("Downloaded google files successfully removed!")
}
# clean = TRUE removes .bib file
# delete files manually instead
# file.remove(
#   paste0(dir, "/esp-template.knit.md"),
#   paste0(dir, "/esp-template.utf8.md"),
#   paste0(dir, "/template.docx")
# )
}
# test snow crab report card
# sablefish (google example)
render_esp(esp_type = "report card",
out_dir = here::here("test"),
out_name = "snow_crab_test_rc.docx",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
render_esp <- function(out_name = "EXAMPLE-FULL-ESP.docx",
out_dir = getwd(),
num = 1, # Appendix number
authors = "Kalei Shotwell, Abby Tyrell",
year = 2021,
contributors = "Kalei Shotwell, Abby Tyrell",
fish = "Myfish",
region = "Myarea",
fig_spreadsheet = "figure_spreadsheet.csv",
tab_spreadsheet = "table_spreadsheet.csv",
ref_spreadsheet = "references_spreadsheet.csv",
esp_text = "full-esp-text-template.docx",
esp_type = "full",
esp_data = NULL,
con_model_path = "default",
stock_image = "default",
bayes_path = "default",
google_folder_url = NULL
) {
# if using a google folder, download files and point to temp folder
if(!is.null(google_folder_url)){
# download files
google <- use_google_files(google_folder_url,
overwrite = TRUE)
# reassign file paths to point to temp folder downloads
fig_spreadsheet <- paste(google, fig_spreadsheet, sep = "/")
tab_spreadsheet <- paste(google, tab_spreadsheet, sep = "/")
ref_spreadsheet <- paste(google, ref_spreadsheet, sep = "/")
message(ref_spreadsheet)
esp_text <- paste(google, esp_text, sep = "/")
if(stock_image != "default"){
stock_image <- paste(google, stock_image, sep = "/")
}
if(con_model_path != "default"){
con_model_path <- paste(google, con_model_path, sep = "/")
}
if(bayes_path != "default"){
bayes_path <- paste(google, bayes_path, sep = "/")
}
dir <- google
} else { dir <- out_dir }
# create references.bib
# message(getwd())
message("creating .bib file...")
AKesp::render_ref(refs = ref_spreadsheet, dir = "")
args <- list(
num, authors, year, contributors, fish, region,
fig_spreadsheet, tab_spreadsheet, esp_text, esp_type,
esp_data, con_model_path, bayes_path, stock_image
)
names(args) <- c(
"num", "authors", "year", "contributors", "fish", "region",
"fig_spreadsheet", "tab_spreadsheet", "esp_text", "esp_type",
"esp_data", "con_model_path", "bayes_path", "stock_image"
)
message("knitting ESP...")
rmarkdown::render(system.file("esp-template.Rmd",
package = "AKesp"
),
clean = FALSE,
params = args,
output_file = out_name,
#  knit_root_dir = dir,
output_dir = out_dir,
intermediates_dir = dir
)
if(!is.null(google_folder_url)){
unlink(google)
message("Downloaded google files successfully removed!")
}
# clean = TRUE removes .bib file
# delete files manually instead
# file.remove(
#   paste0(dir, "/esp-template.knit.md"),
#   paste0(dir, "/esp-template.utf8.md"),
#   paste0(dir, "/template.docx")
# )
}
# test snow crab report card
# sablefish (google example)
render_esp(esp_type = "report card",
out_dir = here::here("test"),
out_name = "snow_crab_test_rc.docx",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
devtools::load_all()
# test snow crab report card
# sablefish (google example)
render_esp(esp_type = "report card",
out_dir = here::here("test"),
out_name = "snow_crab_test_rc.docx",
esp_data = AKesp::get_esp_data("BS Snow Crab"),
con_model_path = "sablefish_con_model.png",
stock_image = "sablefish.png",
bayes_path = "sablefish_bayes.png",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
google_folder_url = "https://drive.google.com/drive/folders/1d7bzQfbDb5j-jTbb366vWtHpx5t8wxWe")
# snow crab!!
dir.create(here::here("snow_crab"))
devtools::load_all()
devtools::load_all()
create_template(path = here::here("snow_crab"))
render_esp(out_dir = here::here("snow_crab"),
out_name = "snow_crab_test.docx",
authors = "Erin Fedewa, Kalei Shotwell, Abby Tyrell",
year = 2022,
fish = "Snow Crab",
region = "Eastern Bering Sea",
esp_data = AKesp::get_esp_data("BS Snow Crab"))
remotes::install_github("atyrell3/AKesp")
remotes::install_github("atyrell3/AKesp")
